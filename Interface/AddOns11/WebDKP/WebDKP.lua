WebDKP_TierInterval=50;WebDKP_Filters={["Druid"]=1,["Hunter"]=1,["Mage"]=1,["Rogue"]=1,["Shaman"]=1,["Paladin"]=1,["Priest"]=1,["Warrior"]=1,["Warlock"]=1,["Group"]=1,["Guild"]=1,["GuildOnline"]=1,["LimitAlts"]=0,["LimitAlts2"]=0,["Standby1"]=1,["Standby2"]=0,["Others"]=0}WebDKP_FilterGroups={["Casters"]="Paladin Shaman Mage Warlock Priest Druid",["Melee"]="Paladin Shaman Warrior Rogue Druid Hunter",["Healer"]="Shaman Paladin Priest Druid",["Chain"]="Shaman Hunter",["Cloth"]="Warlock Mage Priest",["Leather"]="Rogue Druid",["Plate"]="Warrior Paladin"}WebDKP_IgnoreItems={WebDKP.translations.IgnoreItems1,WebDKP.translations.IgnoreItems2}WebDKP_DkpTable={}WebDKP_Loot={}WebDKP_Synch_Users={}WebDKP_RaidInfo={}WebDKP_Ignored_Items={}WebDKP_Tables={}selectedTableid=1;WebDKP_DkpTableToShow={}WebDKP_PlayersInGroup={}WebDKP_PlayersInGroupStatus={}WebDKP_LogSort={["curr"]=3,["way"]=1,["curr2"]=2,["way2"]=1,["curr3"]=1,["way3"]=2,["curr4"]=4,["way4"]=1}WebDKP_FilterName=nil;WebDKP_Options={["AutoGive"]=0,["AwardBossDKP"]=0,["AwardBossDKP_Include_Standy"]=0,["BossDKPMCAndOLValue"]=0,["BossDKPBWLValue"]=0,["BossDKPTAQValue"]=0,["BossDKPNAXXValue"]=0,["ZeroSumStandby"]=1,["TimedStandby"]=1,["AutofillEnabled"]=1,["AutofillThreshold"]=3,["AutoAwardEnabled"]=1,["SelectedTableId"]=1,["MiniMapButtonAngle"]=1,["BidAnnounceRaid"]=0,["BidConfirmPopup"]=1,["BidAllowNegativeBids"]=0,["BidFixedBidding"]=0,["BidNotifyLowBids"]=0,["TimedAwardRepeat"]=1,["TimedAwardInProgress"]=false,["TimedAwardTimer"]=0,["TimedAwardTotalTime"]=5,["TimedAwardDkp"]=0,["SynchPassword"]="",["EnableSynch"]=0,["SynchFrom"]="",["Decay"]=1,["TurnBase"]=1,["SilentBidding"]=1,["BidandRoll"]=0,["FiftyGreed"]=0,["NeedAll"]=0,["DisableBid"]=0,["TimedAwardMiniTimer"]=0,["Enabled"]=1,["Announcements"]=0,["EditStartAnnounce"]="",["EditDuringAnnounce"]="",["EditEndAnnounce"]="",["EditSRollAnnounce"]="",["EditRollAnnounce"]="",["EditERollAnnounce"]="",["InGroup"]=1,["LimitGuild"]=1,["LimitGuildOnline"]=1,["LimitAlts"]=0,["LimitAlts2"]=0,["Standby1"]=0,["Standby2"]=0,["StartBid"]=0,["Time"]=0,["AltClick"]=1,["IgnWhispers"]=0,["GreedDKP"]="50",["NeedDKP"]="100",["dkpCap"]=0,["dkpCapLimit"]=0}WebDKP_WebOptions={["ZeroSumEnabled"]=0,["CombineAlts"]=0}WebDKP_Alts={}SLASH_RELOAD1='/rl'SlashCmdList.RELOAD=ReloadUI;local a=false;local b=WebDKP_sign;SG=""function WebDKP_OnLoad(self)local c=self;if a==false then a=true;SlashCmdList["WEBDKP"]=WebDKP_ToggleGUI;SLASH_WEBDKP1="/webdkp"SLASH_SYNCH1="/synch"SlashCmdList["SYNCH"]=WebDKP_Start_Synch;c:RegisterEvent("CHAT_MSG_SYSTEM")c:RegisterEvent("BOSS_KILL")c:RegisterEvent("CHAT_MSG_MONSTER_YELL")c:RegisterEvent("GROUP_ROSTER_UPDATE")c:RegisterEvent("RAID_ROSTER_UPDATE")c:RegisterEvent("ITEM_TEXT_READY")c:RegisterEvent("ADDON_LOADED")c:RegisterEvent("CHAT_MSG_WHISPER")c:RegisterEvent("CHAT_MSG_LOOT")c:RegisterEvent("CHAT_MSG_PARTY")c:RegisterEvent("CHAT_MSG_RAID")c:RegisterEvent("CHAT_MSG_RAID_LEADER")c:RegisterEvent("CHAT_MSG_RAID_WARNING")c:RegisterEvent("ADDON_ACTION_FORBIDDEN")c:RegisterEvent("COMBAT_LOG_EVENT")c:RegisterEvent("CHAT_MSG_ADDON")c:RegisterEvent("ENCOUNTER_START")c:RegisterEvent("ENCOUNTER_END")c:RegisterEvent("ZONE_CHANGED_NEW_AREA")WebDKP_SessionTicker()WebDKP_OnEnable()end end;function WebDKP_SessionTicker()local d=60;local e=0;C_Timer.NewTicker(d,function()e=e+1;local f=e*d;WebDKP_FrameSaveLogHint:SetText(string.format("已有|cff00FE00%d|r分钟未保存",f/60))end)end;function WebDKP_OnEnable()_G["RivendareFlag"]=0;_G["LadyFlag"]=0;_G["SirFlag"]=0;_G["KorFlag"]=0;_G["Earthbreaker"]=0;_G["WaveBinder"]=0;_G["AwardedReason"]=""_G["AwardedDate"]=""_G["LineLocation"]=""_G["WebDKP_FiltersFrame"]:Show()_G["WebDKP_AwardDKP_Frame"]:Hide()_G["WebDKP_AwardItem_Frame"]:Hide()_G["WebDKP_Standby_Frame"]:Hide()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_AddMessageEventFilters()hooksecurefunc("SetItemRef",WebDKP_ItemChatClick)hooksecurefunc("ChatFrame_OnHyperlinkShow",WebDKP_ItemChatShiftClick)hooksecurefunc("HandleModifiedItemClick",WebDKP_HandleModifiedItemClick)WebDKP_Tab_OnClick(nil)end;function WebDKP_OnEvent(self,g,...)local h,i,j,k,l,m,n,o,p=...if g=="GROUP_ROSTER_UPDATE"then WebDKP_RAID_ROSTER_UPDATE(h)elseif g=="PARTY_MEMBERS_CHANGED"then WebDKP_PARTY_MEMBERS_CHANGED(h)elseif g=="ADDON_LOADED"then WebDKP_ADDON_LOADED(h)elseif g=="CHAT_MSG_SYSTEM"then Webdkp_Sys_Msg_Received(h)elseif g=="CHAT_MSG_ADDON"then if C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA Undo")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA Undo")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA LogAdd")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA LogAdd")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA LogDel")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA LogDel")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA Item")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA Item")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKP MultStart")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKP Mult Start")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKP MultName")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKP MultName")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKP Mult End")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKP Mult End")end;WebDKP_AddonChan_Processing(h,i,j,k)elseif g=="ZONE_CHANGED_NEW_AREA"then WebDKP_AREA_CHANGED()end;if WebDKP_Options["Enabled"]==1 then if g=="CHAT_MSG_WHISPER"then WebDKP_CHAT_MSG_WHISPER(h,l,select(12,...))elseif g=="CHAT_MSG_PARTY"or g=="CHAT_MSG_RAID"or g=="CHAT_MSG_RAID_LEADER"or g=="CHAT_MSG_RAID_WARNING"then WebDKP_CHAT_MSG_PARTY_RAID(h,l)elseif g=="CHAT_MSG_LOOT"then WebDKP_Loot_Taken(h,l)elseif g=="ADDON_ACTION_FORBIDDEN"then WebDKP_Print(h.."  "..l)elseif g=="BOSS_KILL"then local q,r=h,i;WebDKP_BossAward_PerformAward(q,r)elseif g=="ENCOUNTER_START"then WebDKP_Award_Encounter_Start(h)elseif g=="ENCOUNTER_END"then WebDKP_Award_Encounter_End(h)end end end;function WebDKP_AREA_CHANGED()WebDKP_ReloadRaiderCollector()end;function WebDKP_ReloadRaiderCollector()local s=select(8,GetInstanceInfo())if WebDKP.translations.BOSS_MAP[s]~=nil then WebDKP_RaiderCollector.Start()else WebDKP_RaiderCollector.Stop()end end;function WebDKP_ADDON_LOADED(h)if h=="WebDKP"then WebDKP_Text()local t=b.new()t:update(_G["WebDKP_Frame".."Website".."Label"]:GetText())if WebDKP_DkpTable==nil then WebDKP_DkpTable={}end;if WebDKP_Loot==nil then WebDKP_Loot={}end;if WebDKP_Synch_Users==nil then WebDKP_Synch_Users={}end;if WebDKP_Ignored_Items==nil then WebDKP_Ignored_Items={}end;if WebDKP_RaidInfo==nil then WebDKP_RaidInfo={}end;numEntries1=getn(WebDKP_IgnoreItems)numEntries2=getn(WebDKP_Ignored_Items)for u=1,numEntries2,1 do itemfoundflag=0;newitemignored=WebDKP_Ignored_Items[u]for v=1,numEntries1,1 do ItemIgnoredName=WebDKP_IgnoreItems[v]if ItemIgnoredName==newitemignored then itemfoundflag=1 end end;if itemfoundflag==0 then numEntries1=numEntries1+1;tinsert(WebDKP_IgnoreItems,newitemignored)end end;local w=false;if WebDKP_Tables~=nil and next(WebDKP_Tables)~=nil then for x,y in pairs(WebDKP_Tables)do if type(y)=="table"then w=WebDKP_Options["SelectedTableId"]==y["id"]if w then break end end end end;if not w then WebDKP_Options["SelectedTableId"]=1 end;WebDKP_Frame.selectedTableid=WebDKP_Options["SelectedTableId"]WebDKP_Options_Init()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateLogTable()WebDKP_MinimapButton_SetPositionAngle(WebDKP_Options["MiniMapButtonAngle"])t:update(tostring(WebDKP_WebOptions["User"]))t:update(tostring(WebDKP_WebOptions["AddonVersion"]))local z;for A,B in pairs(WebDKP_Tables)do if B["id"]==1 then z=A end end;t:update(tostring(z))SG=b.tohex(t:finish())WebDKP_ReloadRaiderCollector()end end;function WebDKP_OnDisable()end;function WebDKP_ToggleGUI(C,D)local E=0;local F=C;if string.find(F,"ignore")==1 and string.find(F,"list")==8 then local G=UnitName("player")numEntries=getn(WebDKP_Ignored_Items)SendChatMessage("WebDKP: User Defined Ignored Items:","WHISPER",nil,G)for v=1,numEntries,1 do itemignored=WebDKP_Ignored_Items[v]SendChatMessage("WebDKP: Item Ignored ="..itemignored,"WHISPER",nil,G)end end;if string.find(F,"ignore")==1 and string.find(F,"add")==8 then nameofitem=string.gsub(F,"ignore add ","")if nameofitem~=nil and nameofitem~=""then tinsert(WebDKP_IgnoreItems,nameofitem)tinsert(WebDKP_Ignored_Items,nameofitem)end end;if string.find(F,"ignore")==1 and string.find(F,"del")==8 then nameofitem=string.gsub(F,"ignore del ","")if nameofitem~=nil and nameofitem~=""then numEntries1=getn(WebDKP_IgnoreItems)for v=1,numEntries1,1 do local H=WebDKP_IgnoreItems[v]if H==nameofitem then tremove(WebDKP_IgnoreItems,v)end end;numEntries2=getn(WebDKP_Ignored_Items)for v=1,numEntries2,1 do local H=WebDKP_Ignored_Items[v]if H==nameofitem then tremove(WebDKP_Ignored_Items,v)end end end end;if string.find(F,"show")==1 and string.find(F,"table")==6 then if WebDKP_Frame:IsShown()then WebDKP_Frame:Hide()else WebDKP_Frame:Show()WebDKP_FrameScrollFrame:Show()WebDKP_FrameName:Show()WebDKP_FrameClass:Show()WebDKP_FrameDKP:Show()WebDKP_FrameGuildRank:Show()for v=1,22,1 do local I=getglobal("WebDKP_FrameLine"..v)I:Show()end;WebDKP_Tables_DropDown_OnLoad()end end;if string.find(F,"show")==1 and string.find(F,"bidding")==6 then if WebDKP_BidFrame:IsShown()then WebDKP_BidFrame:Hide()else WebDKP_BidFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"synch")==6 then if WebDKP_SynchFrame:IsShown()then WebDKP_SynchFrame:Hide()else WebDKP_SynchFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"options")==6 then if WebDKP_OptionsFrame:IsShown()then WebDKP_OptionsFrame:Hide()else WebDKP_OptionsFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"timed")==6 then if WebDKP_TimedAwardFrame:IsShown()then WebDKP_TimedAwardFrame:Hide()else WebDKP_TimedAwardFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"help")==6 then if WebDKP_HelpFrame:IsShown()then WebDKP_HelpFrame:Hide()else WebDKP_HelpFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"log")==6 then if WebDKP_LogFrame:IsShown()then WebDKP_LogFrame:Hide()else WebDKP_LogFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"raidlog")==6 then if WebDKP_RaidInfoFrame:IsShown()then WebDKP_RaidInfoFrame:Hide()else WebDKP_RaidInfoFrame:Show()end end;if string.find(F,"show")==1 and string.find(F,"charlog")==6 then if WebDKP_CharRaidInfoFrame:IsShown()then WebDKP_CharRaidInfoFrame:Hide()else WebDKP_CharRaidInfoFrame:Show()end end;if string.find(F,"start")==1 and string.find(F,"raid")==7 then WebDKP_RaidStart()end;if string.find(F,"end")==1 and string.find(F,"raid")==5 then WebDKP_RaidEnd()end end;function WebDKP_Table_GUI()if WebDKP_Frame:IsShown()then WebDKP_Frame:Hide()else WebDKP_Frame:Show()WebDKP_FrameScrollFrame:Show()WebDKP_FrameName:Show()WebDKP_FrameClass:Show()WebDKP_FrameDKP:Show()WebDKP_FrameGuildRank:Show()WebDKP_Tables_DropDown_OnLoad()end end;function WebDKP_OPEN_MASTER_LOOT_LIST()end;function WebDKP_PARTY_MEMBERS_CHANGED()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_RAID_ROSTER_UPDATE()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_CHAT_MSG_WHISPER(h,i,J)local K=WebDKP_Options["IgnWhispers"]local L=0;if K==1 then local name=i;if WebDKP_PlayerInGroup(name)==false then L=1 end end;if L==0 then WebDKP_WhisperDKP_Event(h,i,J)WebDKP_Bid_Event(h,i,true)WebDKP_Synch_Processing(h,i)end end;function WebDKP_CHAT_MSG_PARTY_RAID(h,i)WebDKP_Bid_Event(h,i,false)end;function WebDKP_Refresh()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_Tab_OnClick(self)local c=self;if not c then c=WebDKP_FrameTab1 else PlaySound(841)end;tabs={["WebDKP_FiltersFrame"]=WebDKP_FrameTab1,["WebDKP_AwardDKP_Frame"]=WebDKP_FrameTab2,["WebDKP_AwardItem_Frame"]=WebDKP_FrameTab3,["WebDKP_Standby_Frame"]=WebDKP_FrameTab4}for A,B in pairs(tabs)do if B==c then PanelTemplates_SelectTab(B)_G[A]:Show()else PanelTemplates_DeselectTab(B)_G[A]:Hide()end end end;function WebDKP_SelectAll()for A,B in pairs(WebDKP_DkpTable)do if type(B)=="table"then local M=A;if WebDKP_PlayerIsShown(M)then WebDKP_DkpTable[M]["Selected"]=true else WebDKP_DkpTable[M]["Selected"]=false end end end;WebDKP_UpdateTable()WebDKP_UpdateSelectPlayerCount()end;function WebDKP_UnselectAll()for A,B in pairs(WebDKP_DkpTable)do if type(B)=="table"then local M=A;WebDKP_DkpTable[M]["Selected"]=false end end;WebDKP_UpdateTable()WebDKP_UpdateSelectPlayerCount()end;function WebDKP_UpdateFilterGroupsCheckedState()for x,N in pairs(WebDKP_FilterGroups)do if N~=nil then local O=_G["WebDKP_FiltersFrameClass"..x]if O~=nil then local P=WebDKP_AllFiltersOn(N)O:SetChecked(P==1)end end end end;function WebDKP_ReinforceCheckedFilterGroups()for x,N in pairs(WebDKP_FilterGroups)do if N~=nil then local O=_G["WebDKP_FiltersFrameClass"..x]if O~=nil then local Q=O:GetChecked()if Q==1 then WebDKP_SetFilterGroupState(N,1)end end end end end;function WebDKP_ToggleFilter(R)WebDKP_Filters[R]=abs(WebDKP_Filters[R]-1)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateFilterGroupsCheckedState()end;function WebDKP_CheckAllFilters()WebDKP_SetFilterState("Druid",1)WebDKP_SetFilterState("Hunter",1)WebDKP_SetFilterState("Mage",1)WebDKP_SetFilterState("Rogue",1)WebDKP_SetFilterState("Shaman",1)WebDKP_SetFilterState("Paladin",1)WebDKP_SetFilterState("Priest",1)WebDKP_SetFilterState("Warrior",1)WebDKP_SetFilterState("Warlock",1)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateFilterGroupsCheckedState()end;function WebDKP_UncheckAllFilters()WebDKP_SetFilterState("Druid",0)WebDKP_SetFilterState("Hunter",0)WebDKP_SetFilterState("Mage",0)WebDKP_SetFilterState("Rogue",0)WebDKP_SetFilterState("Shaman",0)WebDKP_SetFilterState("Paladin",0)WebDKP_SetFilterState("Priest",0)WebDKP_SetFilterState("Warrior",0)WebDKP_SetFilterState("Warlock",0)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateFilterGroupsCheckedState()end;function WebDKP_ToggleFilterGroup(S)local T=WebDKP_FilterGroups[S]local O=_G["WebDKP_FiltersFrameClass"..S]local Q=O:GetChecked()if Q then WebDKP_SetFilterGroupState(T,1)else WebDKP_SetFilterGroupState(T,0)end;WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_ReinforceCheckedFilterGroups()end;function WebDKP_AllFiltersOn(T)local U={}U["Druid"]=string.find(string.lower(T),"druid")U["Hunter"]=string.find(string.lower(T),"hunter")U["Mage"]=string.find(string.lower(T),"mage")U["Rogue"]=string.find(string.lower(T),"rogue")U["Shaman"]=string.find(string.lower(T),"shaman")U["Paladin"]=string.find(string.lower(T),"paladin")U["Priest"]=string.find(string.lower(T),"priest")U["Warrior"]=string.find(string.lower(T),"warrior")U["Warlock"]=string.find(string.lower(T),"warlock")local V=true;for x,N in pairs(U)do if N~=nil then if WebDKP_Filters[x]==0 then V=false end end end;return V end;function WebDKP_SetFilterGroupState(T,W)local U={}U["Druid"]=string.find(string.lower(T),"druid")U["Hunter"]=string.find(string.lower(T),"hunter")U["Mage"]=string.find(string.lower(T),"mage")U["Rogue"]=string.find(string.lower(T),"rogue")U["Shaman"]=string.find(string.lower(T),"shaman")U["Paladin"]=string.find(string.lower(T),"paladin")U["Priest"]=string.find(string.lower(T),"priest")U["Warrior"]=string.find(string.lower(T),"warrior")U["Warlock"]=string.find(string.lower(T),"warlock")for x,N in pairs(U)do if N~=nil then WebDKP_SetFilterState(x,W)end end end;function WebDKP_SetFilterState(U,W)xmlName=string.gsub(U," ","_")local X=_G["WebDKP_FiltersFrameClass"..xmlName]X:SetChecked(W==1)WebDKP_Filters[U]=W end;function WebDPK2_SortBy(Y)if WebDKP_LogSort["curr"]==Y then WebDKP_LogSort["way"]=abs(WebDKP_LogSort["way"]-1)else WebDKP_LogSort["curr"]=Y;WebDKP_LogSort["way"]=0 end;WebDKP_UpdateTable()end;function WebDKP_HandleMouseOver(self)local c=self;local M=_G[c:GetName().."Name"]:GetText()if M~=nil and not WebDKP_DkpTable[M]["Selected"]then _G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)end end;function WebDKP_HandleMouseOverLog(self)local c=self;if WebDKP_Log~=nil then local Z=_G[c:GetName().."Date"]:GetText()local a0=_G[c:GetName().."Reason"]:GetText()local _,a1,a2=WebDKP_GetItemInfo(a0)a0=a1;local a3=a0 .." "..Z;if WebDKP_Log[a3]~=nil and not WebDKP_Log[a3]["selected"]then _G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)end end end;function WebDKP_HandleMouseLeaveLog(self)local c=self;if WebDKP_Log~=nil then local Z=_G[c:GetName().."Date"]:GetText()local a0=_G[c:GetName().."Reason"]:GetText()local _,a1,a2=WebDKP_GetItemInfo(a0)a0=a1;local a3=a0 .." "..Z;if WebDKP_Log[a3]~=nil and not WebDKP_Log[a3]["selected"]then _G[c:GetName().."Background"]:SetVertexColor(0,0,0,0)end end end;function WebDKP_HandleMouseLeave(self)local c=self;local M=_G[c:GetName().."Name"]:GetText()if M~=nil and not WebDKP_DkpTable[M]["Selected"]then _G[c:GetName().."Background"]:SetVertexColor(0,0,0,0)end end;function WebDKP_SelectPlayerToggle(self)local c=self;local M=_G[c:GetName().."Name"]:GetText()if M~=nil then if WebDKP_DkpTable[M]["Selected"]then WebDKP_DkpTable[M]["Selected"]=false;_G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)else WebDKP_DkpTable[M]["Selected"]=true;_G[c:GetName().."Background"]:SetVertexColor(0.1,0.1,0.9,0.8)end end;WebDKP_UpdateSelectPlayerCount()end;function WebDKP_UpdateSelectPlayerCount()local numEntries=table.getn(WebDKP_DkpTableToShow)local a4=0;local a5=0;for _,B in pairs(WebDKP_DkpTableToShow)do local a6=WebDKP_DkpTable[B.playerName]if a6~=nil and a6["Selected"]then a4=a4+1;if a6["standby"]==1 then a5=a5+1 end end end;local a7=string.format("共|cffFFFFFF%d|r人,选中|cff0089BC%d|r人,其中含替补:|cff00FE00%d|r人",numEntries,a4,a5)_G["WebDKP_Frame".."SelectStatus".."Label"]:SetText(a7)end;function WebDKP_SelectLogToggle(self)local c=self;if WebDKP_Log~=nil then if _G["AwardedReason"]~=nil and _G["AwardedDate"]~=nil then local x=_G["AwardedReason".." ".."AwardedDate"]if x~=nil then WebDKP_Log[x]["selected"]=false end end;if _G["LineLocation"]~=""then _G["LineLocation"]:SetVertexColor(0,0,0,0)end;local Z=_G[c:GetName().."Date"]:GetText()local a0=_G[c:GetName().."Reason"]:GetText()local _,a1,a2=WebDKP_GetItemInfo(a0)a0=a1;local a3=a0 .." "..Z;if WebDKP_Log[a3]~=nil then if WebDKP_Log[a3]["selected"]then WebDKP_Log[a3]["selected"]=false;_G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)else WebDKP_Log[a3]["selected"]=true;_G[c:GetName().."Background"]:SetVertexColor(0.1,0.1,0.9,0.8)end end;_G["AwardedReason"]=a0;_G["AwardedDate"]=Z;_G["LineLocation"]=_G[c:GetName().."Background"]WebDKP_UpdateAwardedTable(a0,Z)end end;function WebDKP_Tables_DropDown_OnLoad()UIDropDownMenu_Initialize(WebDKP_Tables_DropDown,WebDKP_Tables_DropDown_Init)end;function WebDKP_Tables_DropDown_Init()if WebDKP_Frame.selectedTableid==nil then WebDKP_Frame.selectedTableid=1 end;local a8;local a9=""local aa={}for A,y in pairs(WebDKP_Tables)do local ab=y;ab["name"]=A;tinsert(aa,y)end;table.sort(aa,function(ac,ad)return ac["id"]<ad["id"]end)if aa~=nil and table.getn(aa)~=0 then for _,y in pairs(aa)do if type(y)=="table"then a8={}a8.text=y["name"]a8.value=y["id"]a8.func=WebDKP_Tables_DropDown_OnClick;if y["id"]==WebDKP_Frame.selectedTableid then a8.checked=y["id"]==WebDKP_Frame.selectedTableid;a9=a8.text end;UIDropDownMenu_AddButton(a8)end end end;UIDropDownMenu_SetSelectedName(WebDKP_Tables_DropDown,a9)UIDropDownMenu_SetWidth(WebDKP_Tables_DropDown,200,10)end;function WebDKP_Tables_DropDown_OnClick(self)local c=self;WebDKP_Frame.selectedTableid=c.value;WebDKP_Options["SelectedTableId"]=c.value;WebDKP_Tables_DropDown_Init()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_MinimapButton_MouseDown(self)local c=self;local ae,af=GetCursorPosition()ae=ae/c:GetEffectiveScale()af=af/c:GetEffectiveScale()WebDKP_MinimapButton.CursorStartX=ae;WebDKP_MinimapButton.CursorStartY=af;local vCenterX,vCenterY=WebDKP_MinimapButton:GetCenter()local ag,ah=Minimap:GetCenter()WebDKP_MinimapButton.CenterStartX=vCenterX-ag;WebDKP_MinimapButton.CenterStartY=vCenterY-ah end;function WebDKP_MinimapButton_MouseUp(self,ai)PlaySound(856)if ai=="RightButton"then ToggleDropDownMenu(1,nil,self,"WebDKP_MinimapButton",0,0)else WebDKP_WinTab_ToggleGUI()end end;function WebDKP_MinimapButton_DragStart(self)WebDKP_MinimapButton.IsDragging=true;WebDKP_UpdateFrame:Show()end;function WebDKP_MinimapButton_DragEnd(self)WebDKP_MinimapButton.IsDragging=false;WebDKP_UpdateFrame:Hide()end;function WebDKP_MinimapButton_UpdateDragPosition(self)local c=self;local ae,af=GetCursorPosition()ae=ae/c:GetEffectiveScale()af=af/c:GetEffectiveScale()local aj=ae-WebDKP_MinimapButton.CursorStartX;local ak=af-WebDKP_MinimapButton.CursorStartY;local vCenterX=WebDKP_MinimapButton.CenterStartX+aj;local vCenterY=WebDKP_MinimapButton.CenterStartY+ak;local al=math.atan2(vCenterX,vCenterY)WebDKP_MinimapButton_SetPositionAngle(al)end;function WebDKP_RestrictAngle(am,an,ao)if am==nil then return an end;if an==nil or an==nil then return am end;if am<=an or am>=ao then return am end;local ap=(am-an)/(ao-an)if ap>0.5 then return ao else return an end end;function WebDKP_MinimapButton_SetPositionAngle(am)local al=am;local aq=nil;local ar=nil;if GameTimeFrame:IsVisible()then if MinimapZoomIn:IsVisible()or MinimapZoomOut:IsVisible()then al=WebDKP_RestrictAngle(al,0.4302272732931596,2.930420793963121)else al=WebDKP_RestrictAngle(al,0.4302272732931596,1.720531504573905)end elseif MinimapZoomIn:IsVisible()or MinimapZoomOut:IsVisible()then al=WebDKP_RestrictAngle(al,1.720531504573905,2.930420793963121)end;al=WebDKP_RestrictAngle(al,-1.290357134304173,-0.4918423429923585)local as=80;vCenterX=math.sin(al)*as;vCenterY=math.cos(al)*as;WebDKP_MinimapButton:SetPoint("CENTER","Minimap","CENTER",vCenterX-1,vCenterY-1)WebDKP_Options["MiniMapButtonAngle"]=al end;function WebDKP_OnUpdate(self,at)if WebDKP_MinimapButton.IsDragging then WebDKP_MinimapButton_UpdateDragPosition(self)end end;function WebDKP_MinimapDropDown_OnLoad(self)local c=self;UIDropDownMenu_Initialize(c,WebDKP_MinimapDropDown_Initialize)end;function WebDKP_MinimapDropDown_Initialize()WebDKP_Add_MinimapDropDownItem(self,WebDKP.translations.WEBDKP_MINIMAPDROPDOWN_OPTIONS,WebDKP_Options_ToggleUI)WebDKP_Add_MinimapDropDownItem(self,WebDKP.translations.WEBDKP_MINIMAPDROPDOWN_HELP,WebDKP_Help_ToggleGUI)end;function WebDKP_Log_ToggleUI()if WebDKP_LogFrame:IsShown()then WebDKP_LogFrame:Hide()else WebDKP_LogFrame:Show()end end;function WebDKP_Add_MinimapDropDownItem(self,text,au)local c=self;local a8={}a8.text=text;a8.value=text;a8.owner=c;a8.func=au;UIDropDownMenu_AddButton(a8)end;function WebDKP_ItemChatClick(av,text,ai)local aw=strfind(text,"player")if aw==nil then WebDKP_Bid_ItemChatClick(av,text,ai)if IsShiftKeyDown()or IsControlKeyDown()then local _,a1,a2=WebDKP_GetItemInfo(av)WebDKP_AwardItem_FrameItemName:SetText(a2)end;if IsAltKeyDown()and WebDKP_Options["AltClick"]==1 then local _,a1,a2=WebDKP_GetItemInfo(av)WebDKP_BidFrameItem:SetText(a2)if WebDKP_BidFrame:IsShown()==FALSE then WebDKP_Bid_ToggleUI()end end end end;function WebDKP_HandleModifiedItemClick(ax)if ax==nil then return end;WebDKP_Bid_ItemChatClick(ax,nil,nil)if IsShiftKeyDown()or IsControlKeyDown()then local ay,a1,a2=WebDKP_GetItemInfo(ax)WebDKP_Bid_ItemChatClick(a2,a2,nil)WebDKP_AwardItem_FrameItemName:SetText(ax)end;if IsAltKeyDown()and WebDKP_Options["AltClick"]==1 then local _,a1,a2=WebDKP_GetItemInfo(ax)WebDKP_BidFrameItem:SetText(a2)if WebDKP_BidFrame:IsShown()==FALSE then WebDKP_Bid_ToggleUI()end end end;function WebDKP_ItemChatShiftClick(_,av,text,ai)local aw=strfind(text,"player")if aw==nil then WebDKP_Bid_ItemChatClick(av,text,ai)if IsShiftKeyDown()or IsControlKeyDown()then local _,a1,a2=WebDKP_GetItemInfo(av)WebDKP_AwardItem_FrameItemName:SetText(a2)end;if IsAltKeyDown()then local _,a1,a2=WebDKP_GetItemInfo(av)WebDKP_BidFrameItem:SetText(a2)if WebDKP_BidFrame:IsShown()==FALSE then WebDKP_Bid_ToggleUI()end end end end;function Webdkp_Sys_Msg_Received(h)local C=h;local az=""local aA=WebDKP.translations.FORMAT_MSG_ROLLING_PATTERN;local a6,aB,aC,aD,aE,aF,aG;if string.find(C,aA)then _,_,a6,aB,aC,aD=string.find(C,aA)WebDKP_ProcessRoll(a6,aB,aC,aD)end end;function WebDKP_Start_Synch()local aH=WebDKP_Options["SynchFrom"]local aI=WebDKP_Options["SynchPassword"]if aH~=nil and aH~=""then SendChatMessage("!Synch "..aI,"WHISPER",nil,aH)else SendChatMessage("WebDKP: Invalid user to Synchronize from","WHISPER",nil,UnitName("player"))end end;function WebDKP_Start_SynchAll()local aH=WebDKP_Options["SynchFrom"]local aI=WebDKP_Options["SynchPassword"]SendChatMessage("!WDKP_Synch_All "..aI,"WHISPER",nil,aH)end;function WebDKP_UpdateLogTable()if WebDKP_Log~=nil then local aJ={}local aK={}local aL=0;local aM=""for A,B in pairs(WebDKP_Log)do aM=""aL=0;if type(B)=="table"then if B["date"]~=nil and B["points"]~=nil and B["awarded"]~=nil and B["reason"]~=nil and B["foritem"]~=nil then aK=B["awarded"]local aN=true;if WebDKP_FilterName then aN=false;for A,B in pairs(aK)do if type(B)=="table"then if B["name"]==WebDKP_FilterName then aN=true;break end end end end;if aN then for A,B in pairs(aK)do if type(B)=="table"then if B["name"]~=nil then aM=B["name"]aL=aL+1 end end end;if aL==1 then if B["foritem"]=="false"then reasonText=B["reason"]else reasonText=B["itemlink"]end;tinsert(aJ,{B["date"],B["points"],reasonText,aM,B["foritem"]})end;if aL>1 then if B["foritem"]=="false"then reasonText=B["reason"]else reasonText=B["itemlink"]end;tinsert(aJ,{B["date"],B["points"],reasonText,WebDKP.translations.Multipleplayers,B["foritem"]})end end end end end;table.sort(aJ,function(aO,aP)if aO and aP then if aO==nil then return 1>0 elseif aP==nil then return 1<0 end;if WebDKP_LogSort["way2"]==1 then if aO[WebDKP_LogSort["curr2"]]==aP[WebDKP_LogSort["curr2"]]then return aO[1]>aP[1]else return aO[WebDKP_LogSort["curr2"]]>aP[WebDKP_LogSort["curr2"]]end else if aO[WebDKP_LogSort["curr2"]]==aP[WebDKP_LogSort["curr2"]]then return aO[1]<aP[1]else return aO[WebDKP_LogSort["curr2"]]<aP[WebDKP_LogSort["curr2"]]end end end end)local numEntries=getn(aJ)local aQ=FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollLogFrame)FauxScrollFrame_Update(WebDKP_LogFrameScrollLogFrame,numEntries,23,20)for v=1,23,1 do local I=getglobal("WebDKP_LogFrameLine"..v)awardedText=getglobal("WebDKP_LogFrameLine"..v.."Awarded")local aR=getglobal("WebDKP_LogFrameLine"..v.."Amount")local reasonText=getglobal("WebDKP_LogFrameLine"..v.."Reason")local aS=getglobal("WebDKP_LogFrameLine"..v.."Date")local aT=v+FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollLogFrame)if aT<=numEntries then I:Show()local charname=aJ[aT][4]awardedText:SetText(charname)if WebDKP_DkpTable[charname]~=nil and WebDKP_DkpTable[charname]["class"]~=nil then local aU=WebDKP_DkpTable[charname]["class"]aU=string.upper(aU)aU=string.gsub(aU," ","")local aV=WebDKP.translations.CLASS_LOCALIZED_TO_ENG_MAP[aU]if aV~=nil then local aW,aX,aY,aZ=GetClassColor(string.upper(aV))awardedText:SetTextColor(aW,aX,aY)end end;aR:SetText(aJ[aT][2])reasonText:SetText(aJ[aT][3])aS:SetText(aJ[aT][1])else I:Hide()end end end end;function WebDKP_UpdateAwardedTable(a_,b0)local aK={}nameentries={}if a_~=nil and b0~=nil then aK=WebDKP_Log[a_.." "..b0]["awarded"]for A,B in pairs(aK)do if type(B)=="table"then if B["name"]~=nil then tinsert(nameentries,{B["name"]})end end end end;table.sort(nameentries,function(aO,aP)if aO and aP then if aO==nil then return 1>0 elseif aP==nil then return 1<0 end;if WebDKP_LogSort["way3"]==1 then if aO[WebDKP_LogSort["curr3"]]==aP[WebDKP_LogSort["curr3"]]then return aO[1]>aP[1]else return aO[WebDKP_LogSort["curr3"]]>aP[WebDKP_LogSort["curr3"]]end else if aO[WebDKP_LogSort["curr3"]]==aP[WebDKP_LogSort["curr3"]]then return aO[1]<aP[1]else return aO[WebDKP_LogSort["curr3"]]<aP[WebDKP_LogSort["curr3"]]end end end end)local numEntries=getn(nameentries)local aQ=FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollAwardedFrame)FauxScrollFrame_Update(WebDKP_LogFrameScrollAwardedFrame,numEntries,23,20)for v=1,23,1 do local I=getglobal("WebDKP_LogFrameLines"..v)awardedText=getglobal("WebDKP_LogFrameLines"..v.."Awarded")local aT=v+FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollAwardedFrame)if aT<=numEntries then I:Show()local charname=nameentries[aT][1]awardedText:SetText(charname)if WebDKP_DkpTable[charname]~=nil and WebDKP_DkpTable[charname]["class"]~=nil then local aU=WebDKP_DkpTable[charname]["class"]aU=string.upper(aU)aU=string.gsub(aU," ","")local aV=WebDKP.translations.CLASS_LOCALIZED_TO_ENG_MAP[aU]if aV~=nil then local aW,aX,aY,aZ=GetClassColor(string.upper(aV))awardedText:SetTextColor(aW,aX,aY)end end else I:Hide()end end end;function WebDKP_ScrollLogAwardedToggle()WebDKP_UpdateAwardedTable(_G["AwardedReason"],_G["AwardedDate"])end;function WebDKP_LogUndo()if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then if WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]~=nil then if WebDKP_Options["EnableSynch"]==1 then WebDKP_Synch_Auto(points,"UNDO","",_G["AwardedReason"],_G["AwardedDate"])end;awardedtoremove=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]tableidfrom=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["tableid"]local points=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["points"]local a_=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["reason"]local b1=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["foritem"]points=tonumber(points)*-1;for A,B in pairs(awardedtoremove)do if type(B)=="table"then name=B["name"]WebDKP_AddDKPToTable(name,_,points,tableidfrom)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end end;WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]=nil;_G["LineLocation"]:SetVertexColor(0,0,0,0)_G["LineLocation"]=""_G["AwardedReason"]=""_G["AwardedDate"]=""WebDKP_UpdateLogTable()end;for v=1,23,1 do local I=getglobal("WebDKP_LogFrameLines"..v)I:Hide()end;local numEntries=0;FauxScrollFrame_Update(WebDKP_LogFrameScrollAwardedFrame,numEntries,23,20)end end;function WebDKP_ScrollLogListToggle()WebDKP_UpdateLogTable()if WebDKP_Log~=nil then if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["selected"]=false end;if _G["LineLocation"]~=""then _G["LineLocation"]:SetVertexColor(0,0,0,0)end end end;function WebDKPLog_SortBy(b2)if WebDKP_LogSort["curr2"]==b2 then WebDKP_LogSort["way2"]=abs(WebDKP_LogSort["way2"]-1)else WebDKP_LogSort["curr2"]=b2;if b2==1 then WebDKP_LogSort["way2"]=0 elseif b2==2 then WebDKP_LogSort["way2"]=1 elseif b2==3 then WebDKP_LogSort["way2"]=0 else WebDKP_LogSort["way2"]=1 end end;WebDKP_UpdateLogTable()end;function WebDKPCharLog_SortBy(b2)if WebDKP_LogSort["curr4"]==b2 then WebDKP_LogSort["way4"]=abs(WebDKP_LogSort["way4"]-1)else WebDKP_LogSort["curr4"]=b2;if b2==1 then WebDKP_LogSort["way4"]=0 elseif b2==2 then WebDKP_LogSort["way4"]=1 elseif b2==3 then WebDKP_LogSort["way4"]=1 else WebDKP_LogSort["way4"]=1 end end end;function WebDKP_SelectAwardeeLogToggle(self)local c=self;if WebDKP_Log~=nil then if _G["LineLocation"]~=""then _G["LineLocation"]:SetVertexColor(0,0,0,0)end;local b3=_G[c:GetName().."Awarded"]:GetText()if b3~=nil then WebDKP_LogFrameCharChange:SetText(b3)end end end;function WebDKP_DeleteLogChar()local b4=WebDKP_LogFrameCharChange:GetText()local b5=0;if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then if WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]~=nil and b4~=""and b4~=nil then tableidfrom=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["tableid"]local points=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["points"]local a_=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["reason"]local b1=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["foritem"]points=tonumber(points)*-1;local b6=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]local numEntries=getn(b6)for A,B in pairs(b6)do if type(B)=="table"then if B["name"]~=nil then charname=B["name"]if charname==b4 then b5=1 end end end end;if b5==1 then WebDKP_AddDKPToTable(b4,_,points,tableidfrom)WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b4]=nil;WebDKP_UpdateLogTable()numEntries=getn(b6)if numEntries==nil then WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]=nil;local I=getglobal("WebDKP_LogFrameLines"..1)I:Hide()else WebDKP_UpdateAwardedTable(_G["AwardedReason"],_G["AwardedDate"])end end;if WebDKP_Options["EnableSynch"]==1 then WebDKP_Synch_Auto(points,"LOGDEL",b4,_G["AwardedReason"],_G["AwardedDate"])end end end;WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_AddLogChar()local b7=WebDKP_LogFrameCharChange:GetText()local b8=WebDKP_GetTableid()if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then if WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]~=nil and b7~=""and b7~=nil then tableidfrom=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["tableid"]local points=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["points"]local a_=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["reason"]local b1=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["foritem"]points=tonumber(points)WebDKP_MakeSureInTable(b7,b8,nil,nil)local b9=tonumber(WebDKP_Options["dkpCapLimit"])if WebDKP_DkpTable[b7]["dkp_"..b8]+points>b9 then WebDKP_Print("Sorry but this player cannot be added to this specific award because it will place them over the DKP CAP.")PlaySound(847)else WebDKP_AddDKPToTable(b7,_,points,tableidfrom)WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b7]={}WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b7]["name"]=b7;WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b7]["class"]=class;WebDKP_UpdateLogTable()if WebDKP_Options["EnableSynch"]==1 then WebDKP_Synch_Auto(points,"LOGADD",b7,_G["AwardedReason"],_G["AwardedDate"])end end end;WebDKP_UpdateAwardedTable(_G["AwardedReason"],_G["AwardedDate"])end;WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_AnnounceDKPByClass(class,ba)nameEn=WebDKP.translations.CLASS_LOCALIZED_TO_ENG_MAP[class]if nameEn==nil then return end;WebDKP_AnnounceDKPSortedList({[string.lower(nameEn)]=class},ba)end;function WebDKP_AnnounceDKPSortedList(bb,ba)local b8=WebDKP_GetTableid()if bb==nil then bb={}end;local bc={}for A,B in pairs(WebDKP_DkpTable)do if type(B)=="table"then local M=A;local bd=B["class"]local be=WebDKP_GetDKP(M,b8)if be~=nil then local bf=floor((be-1)/WebDKP_TierInterval)if be==0 then bf=0 end;if WebDKP_PassesWhisperFilter(M,bd,be,bf,ba,bb)then tinsert(bc,{M,bd,be,bf})end end end end;table.sort(bc,function(aO,aP)if aO and aP then if aO[3]==aP[3]then return aO[1]>=aP[1]else return aO[3]<=aP[3]end end end)local bg=WebDKP_GetTellLocation()for A,B in pairs(bb)do WebDKP_SendAnnouncement("公布职业: "..B.." 的当前DKP",bg)end;WebDKP_SendAnnouncement("==============================",bg)for A,B in pairs(bc)do if type(B)=="table"then if B[1]~=nil and B[2]~=nil and B[3]~=nil then local bh=B[3]..": "..B[1].." ( "..B[2].." ) "WebDKP_SendAnnouncement(bh,bg)end end end;if table.getn(bc)==0 then WebDKP_SendAnnouncement("未能查到相关职业记录",bg)else WebDKP_SendAnnouncement("更多明细请微信搜索小程序'webdkp'查看哦!",bg)end end;do local bi,bj,bk,bl,bm;local function bn()bi=CreateFrame("Frame","DBMUpdateReminder",UIParent)bi:SetFrameStrata("FULLSCREEN_DIALOG")bi:SetWidth(430)bi:SetHeight(140)bi:SetPoint("TOP",0,-230)bi:SetBackdrop({bgFile="Interface\\DialogFrame\\UI-DialogBox-Background",edgeFile="Interface\\DialogFrame\\UI-DialogBox-Border",tile=true,tileSize=32,edgeSize=32,insets={left=11,right=12,top=12,bottom=11}})bj=bi:CreateFontString(nil,"ARTWORK","GameFontNormal")bj:SetWidth(410)bj:SetHeight(0)bj:SetPoint("TOP",0,-16)bl=CreateFrame("EditBox",nil,bi)do local bo=bl:CreateTexture(nil,"BACKGROUND")local bp=bl:CreateTexture(nil,"BACKGROUND")local bq=bl:CreateTexture(nil,"BACKGROUND")bo:SetTexture(130959)bo:SetHeight(32)bo:SetWidth(32)bo:SetPoint("LEFT",-14,0)bo:SetTexCoord(0,0.125,0,1)bp:SetTexture(130960)bp:SetHeight(32)bp:SetWidth(32)bp:SetPoint("RIGHT",6,0)bp:SetTexCoord(0.875,1,0,1)bq:SetTexture(130960)bq:SetHeight(32)bq:SetWidth(1)bq:SetPoint("LEFT",bo,"RIGHT")bq:SetPoint("RIGHT",bp,"LEFT")bq:SetTexCoord(0,0.9375,0,1)end;bl:SetHeight(32)bl:SetWidth(250)bl:SetPoint("TOP",bj,"BOTTOM",0,-4)bl:SetFontObject("GameFontHighlight")bl:SetTextInsets(0,0,0,1)bl:SetFocus()bl:SetText(bm)bl:HighlightText()bl:SetScript("OnTextChanged",function(self)bl:SetText(bm)bl:HighlightText()end)bk=bi:CreateFontString(nil,"ARTWORK","GameFontNormal")bk:SetWidth(410)bk:SetHeight(0)bk:SetPoint("TOP",bl,"BOTTOM",0,0)local ai=CreateFrame("Button",nil,bi)ai:SetHeight(24)ai:SetWidth(75)ai:SetPoint("BOTTOM",0,13)ai:SetNormalFontObject("GameFontNormal")ai:SetHighlightFontObject("GameFontHighlight")ai:SetNormalTexture(ai:CreateTexture(nil,nil,"UIPanelButtonUpTexture"))ai:SetPushedTexture(ai:CreateTexture(nil,nil,"UIPanelButtonDownTexture"))ai:SetHighlightTexture(ai:CreateTexture(nil,nil,"UIPanelButtonHighlightTexture"))ai:SetText(OKAY)ai:SetScript("OnClick",function(self)bi:Hide()end)end;function WebDKP_ShowOpenWebsite(self)bm=_G["WebDKP_Frame".."Website".."Label"]:GetText()if not bi then bn()else bl:SetText(bm)bl:HighlightText()end;bi:Show()bj:SetText(text)bk:SetText("按下 "..(IsMacClient()and"Cmd-C"or"Ctrl-C").."复制链接到剪切板。")end end;do local function br()end;function WebDKP_WinTab_OnLoad(self)self:RegisterEvent("PLAYER_ENTERING_WORLD")self._curTab=1;self:SetScript("OnEvent",function()self:UnregisterEvent("PLAYER_ENTERING_WORLD")local bs={WebDKP_Frame,WebDKP_BidFrame,WebDKP_TimedAwardFrame,WebDKP_SynchFrame,WebDKP_LogFrame,WebDKP_RaidInfoFrame,WebDKP_CharRaidInfoFrame}local bt={WebDKP_Table_GUI,WebDKP_Bid_ToggleUI,WebDKP_TimedAward_ToggleUI,WebDKP_Synch_ToggleUI,WebDKP_Log_ToggleUI,WebDKP_RaidLog_ToggleUI,WebDKP_CharRaidLog_ToggleUI}for aT,bi in pairs(bs)do do bi._ClearAllPoints=bi.ClearAllPoints;bi.ClearAllPoints=br;bi._SetPoint=bi.SetPoint;bi.SetPoint=br;bi._SetParent=bi.SetParent;bi.SetParent=br end;bi:_SetParent(self)bi:_ClearAllPoints()bi:_SetPoint("CENTER",self)local bu=_G["WebDKP_WinTabFrameTab"..aT]bu.handler=bt[aT]bu.frame=bi;hooksecurefunc(bi,"Show",function()for v,bv in pairs(bs)do if v~=aT then if bv:IsShown()then bt[v]()end;PanelTemplates_DeselectTab(_G["WebDKP_WinTabFrameTab"..v])end end;self._curTab=aT;PanelTemplates_SelectTab(bu)self:Show()WebDKP_WinTabFrameTab1:ClearAllPoints()WebDKP_WinTabFrameTab1:SetPoint("TOPLEFT",bi,"BOTTOMLEFT")end)hooksecurefunc(bi,"Hide",function()for _,bi in pairs(bs)do if bi:IsShown()then break end end;self:Hide()end)bi:SetScript("OnMouseDown",function()self:StartMoving()end)bi:SetScript("OnMouseUp",function()self:StopMovingOrSizing()end)end end)end;function WebDKP_WinTab_OnClick(self)self.handler()end;function WebDKP_WinTab_ToggleGUI()if WebDKP_WinTabFrame:IsShown()then WebDKP_WinTabFrame:Hide()else WebDKP_WinTabFrame:Show()local bs={WebDKP_Frame,WebDKP_BidFrame,WebDKP_TimedAwardFrame,WebDKP_SynchFrame,WebDKP_LogFrame,WebDKP_RaidInfoFrame,WebDKP_CharRaidInfoFrame}local bt={WebDKP_Table_GUI,WebDKP_Bid_ToggleUI,WebDKP_TimedAward_ToggleUI,WebDKP_Synch_ToggleUI,WebDKP_Log_ToggleUI,WebDKP_RaidLog_ToggleUI,WebDKP_CharRaidLog_ToggleUI}if not bs[WebDKP_WinTabFrame._curTab]:IsShown()then bt[WebDKP_WinTabFrame._curTab]()end end end end;function WebDKP_SelectPlayerFilter_GetLog(M,bw)WebDKP_LogFramePlayerFilter:SetText(M)if not bw then WebDKP_FilterName=M;if not WebDKP_LogFrame:IsShown()then WebDKP_Log_ToggleUI()end;WebDKP_UpdateLogTable()end end;function WebDKP_ClearPlayer_Filter()WebDKP_LogFramePlayerFilter:SetText("")WebDKP_FilterName=nil;WebDKP_UpdateLogTable()end;WebDKP_LogLineDel_LogNode=nil;StaticPopupDialogs["WebDKP_DelLog"]={text="删除此记录？",button1="是",button2="否",OnShow=function(self)end,OnAccept=function(self)if WebDKP_LogLineDel_LogNode then WebDKP_SelectLogToggle(WebDKP_LogLineDel_LogNode)WebDKP_LogUndo()WebDKP_LogLineDel_LogNode=nil end end,timeout=0,whileDead=true,hideOnEscape=true,preferredIndex=1}function WebDKP_LogLineDel_OnClick(self)WebDKP_LogLineDel_LogNode=self:GetParent()StaticPopup_Show("WebDKP_DelLog")end;function WebDKP_LineFilter_OnClick(self)local M=_G[self:GetParent():GetName().."Name"]:GetText()if not WebDKP_DkpTable[M]["Selected"]then WebDKP_DkpTable[M]["Selected"]=true;WebDKP_UpdateSelectPlayerCount()end;WebDKP_SelectPlayerFilter_GetLog(M)end;function WebDKP_Text()WebDKP_BidFrameTitle:SetText(WebDKP.translations.BID_TITLE)WebDKP_BidFrameItemLabel:SetText(WebDKP.translations.BID_ITEM_LABEL)WebDKP_BidFrameStartingBidLabel:SetText(WebDKP.translations.BID_STARTING_BID_LABEL)WebDKP_BidFrameTimeLabel:SetText(WebDKP.translations.BID_TIME_LABEL)WebDKP_BidFrameTimeHint:SetText(WebDKP.translations.BID_TIME_HINT)WebDKP_BidFrameBidButton:SetText(WebDKP.translations.BID_BID_BUTTON)WebDKP_BidFrameRollButton:SetText(WebDKP.translations.BID_ROLL_BUTTON)WebDKP_BidFrameTop3Button:SetText(WebDKP.translations.BID_TOP3_BUTTON)WebDKP_BidFrameCountDown5Button:SetText(WebDKP.translations.Fiveseconds)WebDKP_BidFrameNameTableHeader:SetText(WebDKP.translations.BID_TABLE_HEADER)WebDKP_BidFrameNameLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_NAME_LABEL)WebDKP_BidFrameBidLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_BID_LABEL)WebDKP_BidFrameDKPLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_DKP_LABEL)WebDKP_BidFramePostLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_POST_LABEL)WebDKP_BidFrameRollLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_ROLL_LABEL)WebDKP_BidFrameSpecLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_SPEC_LABEL)WebDKP_BidFrameGuildRankLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_GUILD_RANK_LABEL)WebDKP_BidFrameAward:SetText(WebDKP.translations.BID_AWARD)WebDKP_BidConfirmFrameCost:SetText(WebDKP.translations.BidConfirmFrameCost)WebDKP_BidConfirmFrameYes:SetText(WebDKP.translations.BidConfirmFrameYes)WebDKP_BidConfirmFrameNo:SetText(WebDKP.translations.BidConfirmFrameNo)WebDKP_CharRaidInfoFrameTitle:SetText(WebDKP.translations.CharRaidInfoFrameTitle)WebDKP_CharRaidInfoFrameHeaderLogTable:SetText(WebDKP.translations.CharRaidInfoFrameHeaderLogTable)WebDKP_CharRaidInfoFrameHeaderAttended:SetText(WebDKP.translations.CharRaidInfoFrameHeaderAttended)WebDKP_CharRaidInfoFrameFilterDaysLabel:SetText(WebDKP.translations.CharRaidInfoFrameFilterDaysLabel)WebDKP_CharRaidInfoFrameCharRaidNameLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidNameLabel)WebDKP_CharRaidInfoFrameCharRaidAttendedLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidAttendedLabel)WebDKP_CharRaidInfoFrameCharRaidPercentLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidPercentLabel)WebDKP_CharRaidInfoFrameCharRaidTotRaidsLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidTotRaidsLabel)WebDKP_CharRaidInfoFrameCharRaidLocationLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidLocationLabel)WebDKP_CharRaidInfoFrameCharRaidDateLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidDateLabel)WebDKP_CharRaidInfoFrameRemChar:SetText(WebDKP.translations.CharRaidInfoFrameRemChar)WebDKP_CharRaidInfoFrameInGroupLabel:SetText(WebDKP.translations.CharRaidInfoFrameInGroupLabel)WebDKP_CharRaidInfoFrameFilterDateLabel:SetText(WebDKP.translations.CharRaidInfoFrameFilterDateLabel)WebDKP_CharRaidInfoFrameApplyFilterDateLabel:SetText(WebDKP.translations.CharRaidInfoFrameApplyFilterDateLabel)WebDKP_FrameTitle:SetText(WebDKP.translations.FrameTitle)WebDKP_FrameHeaderDKPTable:SetText(WebDKP.translations.WEBDKP_HEADER)WebDKP_FrameNameColumn:SetText(WebDKP.translations.WEBDKP_FRAME_NAME_COLUMN)WebDKP_FrameClassColumn:SetText(WebDKP.translations.WEBDKP_FRAME_CLASS_COLUMN)WebDKP_FrameDKPColumn:SetText(WebDKP.translations.WEBDKP_FRAME_DKP_COLUMN)WebDKP_FrameZoneColumn:SetText(WebDKP.translations.FrameZoneColumn)WebDKP_FrameGuildRankColumn:SetText(WebDKP.translations.WEBDKP_FRAME_GUILDRANK_COLUMN)WebDKP_FrameWebsiteLabel:SetText(WebDKP.translations.FrameWebsiteLabel)WebDKP_FrameAnnounceDKPLimitToGroupText:SetText(WebDKP.translations.FrameAnnounceDKPLimitToGroupText)WebDKP_FrameAnnounceDKP:SetText(WebDKP.translations.FrameAnnounceDKP)WebDKP_FrameSaveLog:SetText(WebDKP.translations.DKP_TABLE_SAVE_LOG)WebDKP_FrameRefresh:SetText(WebDKP.translations.DKP_TABLE_Refresh)WebDKP_FiltersFrameHeader:SetText(WebDKP.translations.FILTER_HEADER)WebDKP_FiltersFrameClassDruidText:SetText(WebDKP.translations.FILTER_CLASS_DRUID)WebDKP_FiltersFrameClassHunterText:SetText(WebDKP.translations.FILTER_CLASS_HUNTER)WebDKP_FiltersFrameClassMageText:SetText(WebDKP.translations.FILTER_CLASS_MAGE)WebDKP_FiltersFrameClassRogueText:SetText(WebDKP.translations.FILTER_CLASS_ROGUE)WebDKP_FiltersFrameClassShamanText:SetText(WebDKP.translations.FILTER_CLASS_SHAMAN)WebDKP_FiltersFrameClassPaladinText:SetText(WebDKP.translations.FILTER_CLASS_PALADIN)WebDKP_FiltersFrameClassPriestText:SetText(WebDKP.translations.FILTER_CLASS_PRIEST)WebDKP_FiltersFrameClassWarriorText:SetText(WebDKP.translations.FILTER_CLASS_WARRIOR)WebDKP_FiltersFrameClassWarlockText:SetText(WebDKP.translations.FILTER_CLASS_WARLOCK)WebDKP_FiltersFrameClassCastersText:SetText(WebDKP.translations.FILTER_CLASS_CASTERS)WebDKP_FiltersFrameClassMeleeText:SetText(WebDKP.translations.FILTER_CLASS_MELEE)WebDKP_FiltersFrameClassHealerText:SetText(WebDKP.translations.FILTER_CLASS_HEALER)WebDKP_FiltersFrameClassChainText:SetText(WebDKP.translations.FILTER_CLASS_CHAIN)WebDKP_FiltersFrameClassClothText:SetText(WebDKP.translations.FILTER_CLASS_CLOTH)WebDKP_FiltersFrameClassLeatherText:SetText(WebDKP.translations.FILTER_CLASS_LEATHER)WebDKP_FiltersFrameClassPlateText:SetText(WebDKP.translations.FILTER_CLASS_PLATE)WebDKP_FiltersFrameCheckAllText:SetText(WebDKP.translations.FILTER_CHECK_ALL)WebDKP_FiltersFrameUncheckAllText:SetText(WebDKP.translations.FILTER_UNCHECK_ALL)WebDKP_FiltersFrameLimitRaidText:SetText(WebDKP.translations.FILTER_PLAYERS_IN_GROUP)WebDKP_FiltersFrameStandby1Text:SetText(WebDKP.translations.FILTER_STANDBY_PLAYERS)WebDKP_FiltersFrameOthersText:SetText(WebDKP.translations.FILTER_OTHERS_PLAYERS)WebDKP_AwardDKP_FrameHeader:SetText(WebDKP.translations.AWARD_DKP_HEADER)WebDKP_AwardDKP_FrameInfo1:SetText(WebDKP.translations.AWARD_DKP_INFO1)WebDKP_AwardDKP_FrameDecayHeader:SetText(WebDKP.translations.AWARD_DKP_DECAY_HEADER)WebDKP_AwardDKP_FrameInfo3:SetText(WebDKP.translations.AWARD_DKP_INFO3)WebDKP_AwardDKP_FrameReasonLabel:SetText(WebDKP.translations.AWARD_DKP_REASON_LABEL)WebDKP_AwardDKP_FramePointsLabel:SetText(WebDKP.translations.AWARD_DKP_POINTS_LABEL)WebDKP_AwardDKP_FrameAwardPoints:SetText(WebDKP.translations.AWARD_DKP_AWARD_POINTS)WebDKP_AwardDKP_FrameDecayLabel:SetText(WebDKP.translations.AWARD_DKP_DECAY_LABEL)WebDKP_AwardDKP_FrameDecayButton:SetText(WebDKP.translations.AWARD_DKP_DECAY_BUTTON)WebDKP_FrameSelectAllText:SetText(WebDKP.translations.FrameSelectAllText)WebDKP_FrameDeselectAllText:SetText(WebDKP.translations.FrameDeselectAllText)WebDKP_AwardItem_FrameHeader:SetText(WebDKP.translations.AWARD_ITEM_HEADER)WebDKP_AwardItem_FrameInfo1:SetText(WebDKP.translations.AWARD_ITEM_INFO1)WebDKP_AwardItem_FrameItemNameLabel:SetText(WebDKP.translations.AWARD_ITEM_ITEM_NAME_LABEL)WebDKP_AwardItem_FrameItemCostLabel:SetText(WebDKP.translations.AWARD_ITEM_ITEM_COST_LABEL)WebDKP_AwardItem_FrameItemCostLabel2:SetText(WebDKP.translations.AWARD_ITEM_ITEM_COST_LABEL2)WebDKP_AwardItem_FrameAwardItem:SetText(WebDKP.translations.AWARD_ITEM_AWARD_ITEM)WebDKP_Standby_FrameHeader:SetText(WebDKP.translations.STANDBY_HEADER)WebDKP_Standby_FrameInfo1:SetText(WebDKP.translations.STANDBY_INFO1)WebDKP_Standby_FrameAddStandbyLabel:SetText(WebDKP.translations.STANDBY_ADD_STANDBY_LABEL)WebDKP_Standby_FrameAddToStandby:SetText(WebDKP.translations.STANDBY_ADD_TO_STANDBY)WebDKP_Standby_FrameDelStandby:SetText(WebDKP.translations.STANDBY_DEL_STANDBY)WebDKP_Standby_FrameResetStandby:SetText(WebDKP.translations.STANDBY_RESET_STANDBY)WebDKP_Standby_FrameResetStandbyLabel:SetText(WebDKP.translations.STANDBY_RESET_STANDBY_LABEL)WebDKP_Standby_FrameEnableStandbyZeroSumText:SetText(WebDKP.translations.STANDBY_ENABLE_STANDBY_ZEROSUM)WebDKP_Standby_FrameEnableStandbyTimedText:SetText(WebDKP.translations.STANDBY_ENABLE_STANDBY_TIMED)WebDKP_FrameTab1:SetText(WebDKP.translations.TAB_FILTER)WebDKP_FrameTab2:SetText(WebDKP.translations.TAB_AWARD_DKP)WebDKP_FrameTab3:SetText(WebDKP.translations.TAB_AWARD_ITEM)WebDKP_FrameTab4:SetText(WebDKP.translations.TAB_STANDBY)WebDKP_HelpFrameTitle:SetText(WebDKP.translations.HelpFrameTitle)WebDKP_Help_DropDownLabel:SetText(WebDKP.translations.Help_DropDownLabel)WebDKP_LogFrameTitle:SetText(WebDKP.translations.LogFrameTitle)WebDKP_LogFrameHeaderLogTable:SetText(WebDKP.translations.LogFrameHeaderLogTable)WebDKP_LogFrameHeaderAwardedTo:SetText(WebDKP.translations.LogFrameHeaderAwardedTo)WebDKP_LogFrameDirChar:SetText(WebDKP.translations.LogFrameDirChar)WebDKP_LogFrameDirFilter:SetText(WebDKP.translations.LogFrameDirFilter)WebDKP_LogFrameAwardedtoLabel:SetText(WebDKP.translations.LogFrameAwardedtoLabel)WebDKP_LogFrameAmountLabel:SetText(WebDKP.translations.LogFrameAmountLabel)WebDKP_LogFrameReasonLabel:SetText(WebDKP.translations.LogFrameReasonLabel)WebDKP_LogFrameDateLabel:SetText(WebDKP.translations.LogFrameDateLabel)WebDKP_LogFrameCharChangeLabel:SetText(WebDKP.translations.LogFrameCharChangeLabel)WebDKP_LogFrameDelChar:SetText(WebDKP.translations.LogFrameDelChar)WebDKP_LogFrameAddChar:SetText(WebDKP.translations.LogFrameAddChar)WebDKP_LogFramePlayerFilterLabel:SetText(WebDKP.translations.LogFramePlayerFilterLabel)WebDKP_LogFramePlayerFilterOK:SetText(WebDKP.translations.LogFramePlayerFilterOK)WebDKP_LogFramePlayerFilterCancel:SetText(WebDKP.translations.LogFramePlayerFilterCancel)WebDKP_LogFrameSaveLog:SetText(WebDKP.translations.LogFrameSaveLog)WebDKP_OptionsFrameTitle:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TITLE)WebDKP_GeneralOptions_FrameTitle:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TITLE)WebDKP_GeneralOptions_FrameInfo1:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO1)WebDKP_GeneralOptions_FrameInfo2:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO2)WebDKP_GeneralOptions_FrameInfo3:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO3)WebDKP_GeneralOptions_FrameInfo4:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO4)WebDKP_GeneralOptions_FrameInfo5:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO5)WebDKP_GeneralOptions_FrameInfo6:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO6)WebDKP_GeneralOptions_FrameInfo7:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO7)WebDKP_GeneralOptions_FrameInfo8:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO8)WebDKP_GeneralOptions_FrameToggleAutofillEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEAUTOFILLENABLED_LABEL)WebDKP_GeneralOptions_FrameAutofillDropDownLabel:SetText(WebDKP.translations.GeneralOptions_FrameAutofillDropDownLabel)WebDKP_GeneralOptions_FrameToggleAutoAwardEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEAUTOAWARDENABLED_LABEL)WebDKP_GeneralOptions_FrameToggleZeroSumEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEZEROSUMENABLED_LABEL)WebDKP_GeneralOptions_FrameToggleAwardBossDKPLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEAWARDBOSSDKP_LABEL)WebDKP_GeneralOptions_FrameToggleAwardBossDKP_Include_StandbyLabel:SetText(WebDKP.translations.FrameToggleAwardBossDKP_Include_StandbyLabel)WebDKP_GeneralOptions_FrameToggleAwardBossDKPIgnoreZeroLabel:SetText(WebDKP.translations.GeneralOptions_FrameToggleAwardBossDKPIgnoreZeroLabel)WebDKP_GeneralOptions_FrameToggleAltClickLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEALTCLICK_LABEL)WebDKP_GeneralOptions_FrameToggleIgnWhispersLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEIGNWHISPERS_LABEL)WebDKP_GeneralOptions_FrameToggledkpCapLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEDKPCAP_LABEL)WebDKP_GeneralOptions_FramedkpCapLimitLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_DKPCAPLIMIT_LABEL)WebDKP_GeneralOptions_FrameBossDKPMCAndOLLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPMCAndOLLabel)WebDKP_GeneralOptions_FrameBossDKPBWLLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPBWLLabel)WebDKP_GeneralOptions_FrameBossDKPTAQLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPTAQLabel)WebDKP_GeneralOptions_FrameBossDKPNAXXLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPNAXXLabel)WebDKP_GeneralOptions_FrameToggleEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEENABLED_LABEL)WebDKP_BiddingOptions_FrameInfo1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_INFO1)WebDKP_BiddingOptions_FrameToggleBidAnnounceRaidLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDANNOUNCERAID_LABEL)WebDKP_BiddingOptions_FrameToggleBidConfirmPopupLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDCONFIRMPOPUP_LABEL)WebDKP_BiddingOptions_FrameToggleBidAllowNegativeBidsLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDALLOWNEGATIVEBIDS_LABEL1)WebDKP_BiddingOptions_FrameToggleBidAllowNegativeBidsLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDALLOWNEGATIVEBIDS_LABEL2)WebDKP_BiddingOptions_FrameToggleBidFixedBiddingLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDFIXEDBIDDING_LABEL1)WebDKP_BiddingOptions_FrameToggleBidFixedBiddingLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDFIXEDBIDDING_LABEL2)WebDKP_BiddingOptions_FrameToggleBidNotifyLowBidsLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDNOTIFYLOWBIDS_LABEL1)WebDKP_BiddingOptions_FrameToggleBidNotifyLowBidsLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDNOTIFYLOWBIDS_LABEL2)WebDKP_BiddingOptions_FrameToggleAutoGiveLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEAUTOGIVE_LABEL1)WebDKP_BiddingOptions_FrameToggleAutoGiveLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEAUTOGIVE_LABEL2)WebDKP_BiddingOptions_FrameToggleTurnBaseLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLETURNBASE_LABEL1)WebDKP_BiddingOptions_FrameToggleTurnBaseLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLETURNBASE_LABEL2)WebDKP_BiddingOptions_FrameToggleSilentBiddingLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLESILENTBIDDING_LABEL1)WebDKP_BiddingOptions_FrameToggleSilentBiddingLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLESILENTBIDDING_LABEL2)WebDKP_BiddingOptions_FrameToggleBidandRollLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDANDROLL_LABEL1)WebDKP_BiddingOptions_FrameToggleBidandRollLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDANDROLL_LABEL2)WebDKP_BiddingOptions_FrameToggleAllNeedLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEALLNEED_LABEL1)WebDKP_BiddingOptions_FrameToggleAllNeedLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEALLNEED_LABEL2)WebDKP_BiddingOptions_FrameNeedDKPLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_NEEDDKP_LABEL)WebDKP_BiddingOptions_FrameToggleFiftyGreedLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEFIFTYGREED_LABEL1)WebDKP_BiddingOptions_FrameToggleFiftyGreedLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEFIFTYGREED_LABEL2)WebDKP_BiddingOptions_FrameGreedDKPLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_GREEDDKP_LABEL)WebDKP_BiddingOptions_FrameToggleDisableBidLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEDISABLEBID_LABEL1)WebDKP_BiddingOptions_FrameToggleDisableBidLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEDISABLEBID_LABEL2)WebDKP_AnnouncementsOptions_FrameInfo12:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO12)WebDKP_AnnouncementsOptions_FrameInfo13:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO13)WebDKP_AnnouncementsOptions_FrameInfo14:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO14)WebDKP_AnnouncementsOptions_FrameInfo15:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO15)WebDKP_AnnouncementsOptions_FrameInfo16:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO16)WebDKP_AnnouncementsOptions_FrameInfo17:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO17)WebDKP_AnnouncementsOptions_FrameInfo18:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO18)WebDKP_AnnouncementsOptions_FrameToggleAnnouncementsLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_TOGGLEANNOUNCEMENTS_LABEL)WebDKP_AnnouncementsOptions_FrameEditStartAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITSTARTANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditDuringAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITDURINGANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditEndAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITENDANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditSRollAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITSROLLANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditRollAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITROLLANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditERollAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITEROLLANNOUNCE_LABEL)WebDKP_OptionsFrameTab1:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TAB1)WebDKP_OptionsFrameTab2:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TAB2)WebDKP_OptionsFrameTab3:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TAB3)WebDKP_RaidInfoFrameTitle:SetText(WebDKP.translations.RaidInfoFrameTitle)WebDKP_RaidInfoFrameHeaderLog:SetText(WebDKP.translations.RaidInfoFrameHeaderLog)WebDKP_RaidInfoFrameHeaderAttended:SetText(WebDKP.translations.RaidInfoFrameHeaderAttended)WebDKP_RaidInfoFrameHeaderDirTime:SetText(WebDKP.translations.RaidInfoFrameHeaderDirTime)WebDKP_RaidInfoFrameHeaderDirChar:SetText(WebDKP.translations.RaidInfoFrameHeaderDirChar)WebDKP_RaidInfoFrameRaidLocationLabel:SetText(WebDKP.translations.RaidInfoFrameRaidLocationLabel)WebDKP_RaidInfoFramedateLabel:SetText(WebDKP.translations.RaidInfoFramedateLabel)WebDKP_RaidInfoFramestartTimeLabel:SetText(WebDKP.translations.RaidInfoFramestartTimeLabel)WebDKP_RaidInfoFrameendTimeLabel:SetText(WebDKP.translations.RaidInfoFrameendTimeLabel)WebDKP_RaidInfoFrametotaltimeLabel:SetText(WebDKP.translations.RaidInfoFrametotaltimeLabel)WebDKP_RaidInfoFrameStartRaid:SetText(WebDKP.translations.RaidInfoFrameStartRaid)WebDKP_RaidInfoFrameStopRaid:SetText(WebDKP.translations.RaidInfoFrameStopRaid)WebDKP_RaidInfoFrameDeleteRaid:SetText(WebDKP.translations.RaidInfoFrameDeleteRaid)WebDKP_RaidInfoFrameEndTimeLabel:SetText(WebDKP.translations.RaidInfoFrameEndTimeLabel)WebDKP_RaidInfoFrameAdjustTime:SetText(WebDKP.translations.RaidInfoFrameAdjustTime)WebDKP_RaidInfoFrameCharChangeLabel:SetText(WebDKP.translations.RaidInfoFrameCharChangeLabel)WebDKP_RaidInfoFrameAddChar:SetText(WebDKP.translations.RaidInfoFrameAddChar)WebDKP_RaidInfoFrameDelChar:SetText(WebDKP.translations.RaidInfoFrameDelChar)WebDKP_SynchFrameTitle:SetText(WebDKP.translations.SynchFrameTitle)WebDKP_SynchFrameText:SetText(WebDKP.translations.SynchFrameText)WebDKP_SynchFrameUsers:SetText(WebDKP.translations.SynchFrameUsers)WebDKP_SynchFrameNameLabel:SetText(WebDKP.translations.SynchFrameNameLabel)WebDKP_SynchFrameEnableSynchLabel:SetText(WebDKP.translations.SynchFrameEnableSynchLabel)WebDKP_SynchFramePasswordLabel:SetText(WebDKP.translations.SynchFramePasswordLabel)WebDKP_SynchFrameSynchFromLabel:SetText(WebDKP.translations.SynchFrameSynchFromLabel)WebDKP_SynchFrameSynchronize:SetText(WebDKP.translations.SynchFrameSynchronize)WebDKP_SynchFrameSynchAll:SetText(WebDKP.translations.SynchFrameSynchAll)WebDKP_SynchFrameAddSynchUserLabel:SetText(WebDKP.translations.SynchFrameAddSynchUserLabel)WebDKP_SynchFrameAddUser:SetText(WebDKP.translations.SynchFrameAddUser)WebDKP_SynchFrameDelUser:SetText(WebDKP.translations.SynchFrameDelUser)WebDKP_TimedAwardFrameTitle:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TITLE)WebDKP_TimedAwardFrameText:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TEXT)WebDKP_TimedAwardFrameDkpLabel:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_DKP_LABEL)WebDKP_TimedAwardFrameTimeLabel:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TIME_LABEL)WebDKP_TimedAwardFrameTimeHint:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TIME_HINT)WebDKP_TimedAwardFrameLoopTimerLabel:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_LOOPTIMER_LABEL)WebDKP_TimedAwardFrameResetButton:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_RESETBUTTON)WebDKP_TimedAwardFrameStartStopButton:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_STARTSTOPBUTTON)WebDKP_TimedAwardFrameMiniButton:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_MINIBUTTON)WebDKP_TimedAward_MiniFrameTimeLeft:SetText(WebDKP.translations.TimedAward_MiniFrameTimeLeft)WebDKP_WinTabFrameTab1:SetText(WebDKP.translations.WinTabFrameTab1)WebDKP_WinTabFrameTab2:SetText(WebDKP.translations.WinTabFrameTab2)WebDKP_WinTabFrameTab3:SetText(WebDKP.translations.WinTabFrameTab3)WebDKP_WinTabFrameTab4:SetText(WebDKP.translations.WinTabFrameTab4)WebDKP_WinTabFrameTab5:SetText(WebDKP.translations.WinTabFrameTab5)WebDKP_WinTabFrameTab6:SetText(WebDKP.translations.WinTabFrameTab6)WebDKP_WinTabFrameTab7:SetText(WebDKP.translations.WinTabFrameTab7)end
